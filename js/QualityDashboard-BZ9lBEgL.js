var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,n=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&i(e,s,t[s]);if(a)for(var s of a(t))l.call(t,s)&&i(e,s,t[s]);return e},c=(e,a)=>t(e,s(a)),d=(e,t,s)=>new Promise((a,r)=>{var l=e=>{try{n(s.next(e))}catch(t){r(t)}},i=e=>{try{n(s.throw(e))}catch(t){r(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);n((s=s.apply(e,t)).next())});import{_ as o,B as x}from"./home-critical-BcEQpAy_.js";import{j as m,r as g,E as h,H as u,J as f,K as j,N as p,Z as v,O as N,Q as y,D as b,d as w,V as S,W as T,w as C}from"./react-core-DHHqMHAI.js";import{C as E,a as L,b as O,d as P}from"./card-B_t_nwDk.js";import{a as F}from"./utils-uFSRKTsX.js";import{c as R}from"./gallery-M8qwidzj.js";import"./ui-components-BTIQ8auT.js";import"./react-dom-DCJzcTvd.js";import"./router-Bwc0m8wX.js";const D=F("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function A(e){var t=e,{className:s,variant:i}=t,c=((e,t)=>{var s={};for(var i in e)r.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&a)for(var i of a(e))t.indexOf(i)<0&&l.call(e,i)&&(s[i]=e[i]);return s})(t,["className","variant"]);return m.jsx("div",n({className:R(D({variant:i}),s)},c))}const B=()=>{var e;const[t,s]=g.useState({}),[a,r]=g.useState([]),[l,i]=g.useState(!1),[F,R]=g.useState(""),[D,B]=g.useState(!1),[I,M]=g.useState(new Date);g.useEffect(()=>{$(),z()},[]);const $=()=>d(void 0,null,function*(){try{const{getCLS:e,getFID:t,getFCP:a,getLCP:r,getTTFB:l}=yield o(()=>d(void 0,null,function*(){const{getCLS:e,getFID:t,getFCP:s,getLCP:a,getTTFB:r}=yield import("./performance-l0sNRNKZ.js");return{getCLS:e,getFID:t,getFCP:s,getLCP:a,getTTFB:r}}),[]);e(e=>s(t=>c(n({},t),{cls:e}))),t(e=>s(t=>c(n({},t),{fid:e}))),a(e=>s(t=>c(n({},t),{fcp:e}))),r(e=>s(t=>c(n({},t),{lcp:e}))),l(e=>s(t=>c(n({},t),{ttfb:e})));const i=performance.getEntriesByType("navigation")[0];i&&s(e=>c(n({},e),{loadTime:i.loadEventEnd-i.loadEventStart,domContentLoaded:i.domContentLoadedEventEnd-i.domContentLoadedEventStart,ttfb:i.responseStart-i.requestStart}));const x=performance.getEntriesByType("resource");s(e=>c(n({},e),{totalResources:x.length,totalSize:x.reduce((e,t)=>e+(t.transferSize||0),0)}));const m=performance.memory;m&&s(e=>c(n({},e),{memoryUsed:m.usedJSHeapSize,memoryLimit:m.jsHeapSizeLimit}));const g=navigator.connection;g&&s(e=>c(n({},e),{connectionType:g.effectiveType||"unknown"})),M(new Date)}catch(e){}}),z=()=>{const e=localStorage.getItem("formTestReport");if(e)try{const t=JSON.parse(e);r(t.results||[])}catch(t){}},k=(e,t)=>{if(!t)return"text-gray-400";const s={lcp:{good:2500,poor:4e3},fid:{good:100,poor:300},cls:{good:.1,poor:.25},fcp:{good:1800,poor:3e3},ttfb:{good:600,poor:1800}}[e];return s?t<=s.good?"text-green-600":t<=s.poor?"text-yellow-600":"text-red-600":"text-gray-400"},U=()=>{const e=["lcp","fid","cls","fcp","ttfb"].map(e=>k(e,t[e])).filter(e=>"text-gray-400"!==e),s=e.filter(e=>"text-green-600"===e).length,a=e.length;return s===a?"EXCELENTE":s>=.8*a?"BOM":s>=.6*a?"PRECISA MELHORAR":"RUIM"},_=e=>e?e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(1)}s`:"N/A",q=e=>{if(!e)return"N/A";const t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(1)} ${["B","KB","MB","GB"][t]}`},H=e=>{switch(e){case"PASS":return m.jsx(C,{className:"w-4 h-4 text-green-500"});case"FAIL":return m.jsx(T,{className:"w-4 h-4 text-red-500"});case"ERROR":return m.jsx(S,{className:"w-4 h-4 text-yellow-500"});default:return null}};return m.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[m.jsx(h,{className:"w-8 h-8 text-blue-600"}),"Quality Dashboard"]}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor de qualidade e performance do site do Colégio Dona Clara"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs(x,{onClick:$,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[m.jsx(u,{className:"w-4 h-4"}),"Atualizar"]}),m.jsxs(x,{onClick:()=>B(!D),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[m.jsx(D?f:j,{className:"w-4 h-4"}),D?"Ocultar":"Mostrar"," Detalhes"]})]})]}),m.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Última atualização: ",I.toLocaleString()]})]}),m.jsxs(E,{className:"mb-6",children:[m.jsx(L,{children:m.jsxs(O,{className:"flex items-center gap-2",children:[m.jsx(p,{className:"w-5 h-5"}),"Score Geral de Performance"]})}),m.jsx(P,{children:m.jsx("div",{className:"text-center",children:m.jsx(A,{className:`text-lg px-6 py-3 ${(()=>{const e=["lcp","fid","cls","fcp","ttfb"].map(e=>k(e,t[e])).filter(e=>"text-gray-400"!==e),s=e.filter(e=>"text-green-600"===e).length,a=e.length;return s===a?"bg-green-100 text-green-800":s>=.8*a?"bg-blue-100 text-blue-800":s>=.6*a?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:U()})})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs(E,{children:[m.jsx(L,{children:m.jsxs(O,{className:"flex items-center gap-2",children:[m.jsx(v,{className:"w-5 h-5"}),"Web Vitals"]})}),m.jsx(P,{children:m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"LCP"}),m.jsx("div",{className:`text-lg font-semibold ${k("lcp",t.lcp)}`,children:_(t.lcp)}),m.jsx("div",{className:"text-xs text-gray-500",children:"Largest Contentful Paint"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"FID"}),m.jsx("div",{className:`text-lg font-semibold ${k("fid",t.fid)}`,children:_(t.fid)}),m.jsx("div",{className:"text-xs text-gray-500",children:"First Input Delay"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"CLS"}),m.jsx("div",{className:`text-lg font-semibold ${k("cls",t.cls)}`,children:(null==(e=t.cls)?void 0:e.toFixed(3))||"N/A"}),m.jsx("div",{className:"text-xs text-gray-500",children:"Cumulative Layout Shift"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"FCP"}),m.jsx("div",{className:`text-lg font-semibold ${k("fcp",t.fcp)}`,children:_(t.fcp)}),m.jsx("div",{className:"text-xs text-gray-500",children:"First Contentful Paint"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"TTFB"}),m.jsx("div",{className:`text-lg font-semibold ${k("ttfb",t.ttfb)}`,children:_(t.ttfb)}),m.jsx("div",{className:"text-xs text-gray-500",children:"Time to First Byte"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Load Time"}),m.jsx("div",{className:"text-lg font-semibold text-gray-900",children:_(t.loadTime)}),m.jsx("div",{className:"text-xs text-gray-500",children:"Tempo de Carregamento"})]})]})})})]}),m.jsxs(E,{children:[m.jsx(L,{children:m.jsxs(O,{className:"flex items-center gap-2",children:[m.jsx(N,{className:"w-5 h-5"}),"Recursos do Site"]})}),m.jsx(P,{children:m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Arquivos"}),m.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t.totalResources||"N/A"}),m.jsx("div",{className:"text-xs text-gray-500",children:"Total de recursos"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Tamanho"}),m.jsx("div",{className:"text-lg font-semibold text-gray-900",children:q(t.totalSize)}),m.jsx("div",{className:"text-xs text-gray-500",children:"Tamanho total"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Rede"}),m.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t.connectionType||"N/A"}),m.jsx("div",{className:"text-xs text-gray-500",children:"Tipo de conexão"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Memória"}),m.jsx("div",{className:"text-lg font-semibold text-gray-900",children:q(t.memoryUsed)}),m.jsx("div",{className:"text-xs text-gray-500",children:"Memória usada"})]})]})})})]})]}),m.jsxs(E,{className:"mt-6",children:[m.jsx(L,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs(O,{className:"flex items-center gap-2",children:[m.jsx(y,{className:"w-5 h-5"}),"Testes de Formulários"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs(x,{onClick:()=>d(void 0,null,function*(){i(!0);try{const e=document.createElement("script");e.src="/test-formularios.js",document.head.appendChild(e),e.onload=()=>{window.executarTestesFormularios?window.executarTestesFormularios().then(()=>{z(),i(!1)}):i(!1)}}catch(e){i(!1)}}),disabled:l,className:"flex items-center gap-2",children:[m.jsx(y,{className:"w-4 h-4"}),l?"Testando...":"Executar Testes"]}),m.jsxs(x,{onClick:()=>{const e={timestamp:(new Date).toISOString(),url:window.location.href,performance:t,formTests:a,summary:{overallScore:U(),totalTests:a.reduce((e,t)=>e+t.results.tests.length,0),passedTests:a.reduce((e,t)=>e+t.results.tests.filter(e=>"PASS"===e.status).length,0)}},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=`quality-report-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[m.jsx(b,{className:"w-4 h-4"}),"Baixar Relatório"]})]})]})}),m.jsxs(P,{children:[a.length>0?m.jsx("div",{className:"space-y-4",children:a.map((e,t)=>m.jsxs("div",{className:"border rounded-lg p-4",children:[m.jsx("h3",{className:"font-semibold text-lg mb-3",children:e.form}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.results.tests.map((e,t)=>m.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded",children:[H(e.status),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-sm",children:e.name}),D&&e.expected&&m.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Esperado: ",e.expected]}),D&&e.actual&&m.jsxs("div",{className:"text-xs text-gray-600",children:["Atual: ",e.actual]})]})]},t))})]},t))}):m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(y,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),m.jsx("p",{children:"Nenhum teste executado ainda."}),m.jsx("p",{className:"text-sm",children:'Clique em "Executar Testes" para começar.'})]}),m.jsxs("div",{className:"mt-6 pt-6 border-t",children:[m.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[m.jsx(w,{className:"w-4 h-4"}),"Enviar Relatório por Email"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("input",{type:"email",placeholder:"Digite seu email",value:F,onChange:e=>R(e.target.value),className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.jsxs(x,{onClick:()=>d(void 0,null,function*(){if(F)try{(new Date).toISOString(),window,U(),a.reduce((e,t)=>e+t.results.tests.length,0),a.reduce((e,t)=>e+t.results.tests.filter(e=>"PASS"===e.status).length,0);alert(`Relatório enviado para ${F}`)}catch(e){}}),disabled:!F,className:"flex items-center gap-2",children:[m.jsx(w,{className:"w-4 h-4"}),"Enviar"]})]})]})]})]})]})})};export{B as default};
